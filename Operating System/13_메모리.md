## 메모리



##### 메인 메모리

- CPU가 직접 접근할 수 있는 기억 장치



##### 메모리 관리 장치(MMU, Memory Management Unit)

- 메모리 관리의 핵심 장치
- (논리 주소 -> 물리 주소) 주소 변환 역할을 수행

- 메모리 보호, 캐시 관리 등 CPU가 메모리에 접근하는 것을 총 관리해주는 **하드웨어**



##### MMU의 메모리 보호

- 각 프로세스에 합법적인 주소 영역을 설정
- 잘못된 접근이 오면 trap을 발생시키며 보호 

- base, limit 레지스터를 활용한 메모리 보호 기법

  - base 레지스터 : 메모리 상의 프로세스 시작 주소를 물리 주소로 저장하여 갖고 있음
  - limit 레지스터 : 프로세스의 사이즈를 저장

  -> 두 레지스터를 활용하여 잘못된 접근인지 아닌지를 판별

  ​	=> base, limit 레지스터는 안전성을 위해 <u>커널 모드에서만 수정</u>이 가능하도록 설계



##### 메모리 과할당

- 실제 메모리 사이즈 보다 더 큰 사이즈의 메모리를 프로세스에 할당한 상황

  

  ㄱ. 가상 메모리를 통해 사용자가 실제 메모리 보다 더 큰 메모리 공간을 쓰는 것처럼 느끼게 함 

  ㄴ. 그러다보니 <u>과할당 상황에서는 사용자를 속인 것을 들킬 수 있음</u>

  ​	

- 메모리 과할당 상황에서의 증상

  1. 프로세스 실행 도중 페이지 폴트 발생

  2. 페이지 폴트를 발생시킨 페이지 위치를 디스크에서 찾음

  3. 메모리의 빈 프레임에 페이지를 올려야 하는데,

     모든 메모리가 사용 중이라 빈 프레임이 없음

  

  => \*\* 과할당을 해결하기 위해 빈 프레임을 확보해야 함

  			1. 메모리에 올라와 있는 한 <u>프로세스를 종료</u>, 빈 프레임을 확보
     			2. 프로세스 하나를 <u>swap out</u>, 이 공간을 빈 프레임으로 활용

     => ***공간을 바꿔치기 하는 2번과는 달리 1번은 사용자에게 페이징 시스템을 들킬 가능성이 높음***

  ​		=> 1번은 매우 권장되지 않는 방법

  ​		=> <u>페이징 기법은 사용자 모르게 시스템 능률을 높이기 위한 방법</u>이므로,

  ​              사용자에게 들킨다면 부적절한 상황