## 인터럽트(Interrupt)



- 프로그램 실행 중 예기치 않은 상황 발생 ( ex. 입출력, 우선 순위 연산 등 )

  => 현재 <u>실행 중인 작업을 즉시 중단</u>하고,

  ​      <u>발생된 상황을 우선 처리</u>하고 <u>실행 중이던 작업으로 복귀하여 계속 처리</u>하는 것



- 외부 / 내부 인터럽트 => CPU의 하드웨어 신호에 의해 발생

  - 외부 인터럽트

    - 입출력 장치, 타이밍 장치, 전원 등 외부 요인으로 발생

      ex. 전원 이상, 기계 착오, 외부 신호, 입출력 등

  - 내부 인터럽트

    - <u>Trap이라고 부르며</u>, 잘못된 명령이나 데이터를 사용할 때 발생

      ex. 0으로 나누기가 발생, 오버플로우, 명령어를 잘못 사용한 경우 등

  

- 소프트웨어 인터럽트 => 명령어의 수행에 의해 발생

  - 프로그램 처리 중 명령의 요청에 의해 발생, <u>SVC 인터럽트</u>

    => 사용자가 프로그램을 실행시킬 때 발생

    ​      소프트웨어 이용 중 다른 프로세스를 실행시키면,

    ​      시분할 처리를 위해 자원 할당 동작이 수행





##### 인터럽트 발생 처리 과정

1. 주 프로그램이 실행되다가 인터럽트가 발생
2. 현재 수행 중인 프로그램을 멈추고, 상태 레지스터와 PC 등을 스택에 잠시 저장
3. 인터럽트 서비스 루틴으로 진입
4. 인터럽트 처리 후 본래 작업 중이던 프로그램을 불러와 이어서 수행



##### 컨트롤러가 입력을 받아들이는 방법

=> <u>*우선 순위 판별 방법*</u>



1. 폴링(Polling) 방식

   - 사용자가 <u>명령어를 사용하여 입력 핀의 값을 계속 읽어</u> 변화를 알아내는 방식

   - 인터럽트 요청 플래그를 차례로 비교, 우선 순위가 가장 높은 인터럽트 자원을 찾아서

     이에 맞는 인터럽트 서비스 루틴을 수행

     => 하드웨어에 비해 속도가 느림

2. 인터럽트 방식

   - <u>MCU 자체가 하드웨어적으로 변화를 체크</u>하여 변화 시에만 일정한 동작을 하는 방식

     ㄱ. Daisy Chain

     ㄴ. 병렬 우선순위 부여

     => 하드웨어로 지원을 받아야 하지만,

     ​      폴링에 비해 발생시기를 예측하기 힘든 경우에도

     ​      컨트롤러가 신속하게 대응하는 것이 가능

